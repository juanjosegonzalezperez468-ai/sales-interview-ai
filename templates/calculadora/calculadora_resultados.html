<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tu Diagn√≥stico - Sales AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50 min-h-screen">
    
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center text-white text-sm font-bold">S</div>
                <span class="text-xl font-bold text-gray-900">Sales AI</span>
            </div>
            <div class="flex items-center gap-4">
                <button onclick="descargarPDF()" class="flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
                    </svg>
                    Descargar PDF
                </button>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-8">
        
        <!-- Banner de √©xito -->
        <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white mb-8">
            <div class="flex items-start justify-between">
                <div class="flex-1">
                    <div class="inline-flex items-center gap-2 bg-white/20 px-3 py-1 rounded-full text-sm font-semibold mb-4">
                        ‚úÖ Diagn√≥stico Completo
                    </div>
                    <h1 class="text-3xl font-bold mb-3">
                        ¬°Listo! Aqu√≠ est√° tu diagn√≥stico completo
                    </h1>
                    <p class="text-blue-100 text-lg">
                        Basado en tu proceso actual, identificamos oportunidades de ahorro de 
                        <strong class="text-white">${{ "{:,.0f}".format(diagnostico.ahorro_anual) }}/a√±o</strong>
                    </p>
                </div>
                <div class="hidden md:block">
                    <div class="w-24 h-24 bg-white/10 rounded-2xl flex items-center justify-center text-5xl">
                        üìä
                    </div>
                </div>
            </div>
        </div>

        <!-- Grid de m√©tricas -->
        <div class="grid md:grid-cols-4 gap-6 mb-8">
            
            <!-- M√©trica 1: Costo actual -->
            <div class="bg-white rounded-xl p-6 border border-gray-200">
                <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500 font-semibold uppercase">Costo Mensual Actual</p>
                        <p class="text-2xl font-bold text-gray-900">${{ "{:,.0f}".format(diagnostico.costo_operativo_mensual) }}</p>
                    </div>
                </div>
                <p class="text-sm text-gray-600">En revisi√≥n manual de CVs</p>
            </div>

            <!-- M√©trica 2: Horas invertidas -->
            <div class="bg-white rounded-xl p-6 border border-gray-200">
                <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500 font-semibold uppercase">Horas al Mes</p>
                        <p class="text-2xl font-bold text-gray-900">{{ diagnostico.horas_mensuales|round|int }}h</p>
                    </div>
                </div>
                <p class="text-sm text-gray-600">Tiempo del equipo</p>
            </div>

            <!-- M√©trica 3: Eficiencia -->
            <div class="bg-white rounded-xl p-6 border border-gray-200">
                <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500 font-semibold uppercase">Eficiencia Actual</p>
                        <p class="text-2xl font-bold text-gray-900">{{ diagnostico.eficiencia_total|round|int }}%</p>
                    </div>
                </div>
                <p class="text-sm text-gray-600">Comparado con benchmark</p>
            </div>

            <!-- M√©trica 4: Ahorro potencial -->
            <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white">
                <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-xs text-green-100 font-semibold uppercase">Ahorro Anual Potencial</p>
                        <p class="text-2xl font-bold">${{ "{:,.0f}".format(diagnostico.ahorro_anual) }}</p>
                    </div>
                </div>
                <p class="text-sm text-green-100">Con automatizaci√≥n IA</p>
            </div>
        </div>

        <!-- CTA PRINCIPAL - Trial gratis -->
        <div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl p-8 mb-8 text-white relative overflow-hidden">
            <div class="absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full -mr-32 -mt-32"></div>
            <div class="absolute bottom-0 left-0 w-48 h-48 bg-white/5 rounded-full -ml-24 -mb-24"></div>
            
            <div class="relative z-10 max-w-4xl">
                <div class="flex items-start justify-between gap-8">
                    <div class="flex-1">
                        <div class="inline-flex items-center gap-2 bg-white/20 px-3 py-1 rounded-full text-sm font-semibold mb-4">
                            üöÄ Recomendaci√≥n
                        </div>
                        <h2 class="text-3xl font-bold mb-3">
                            ¬øQuieres automatizar esto?
                        </h2>
                        <p class="text-blue-100 text-lg mb-6">
                            Sales AI puede reducir este costo en <strong class="text-white">70%</strong> y 
                            aumentar tu capacidad de evaluaci√≥n en <strong class="text-white">233%</strong>. 
                            Sin cambiar tu proceso actual.
                        </p>
                        <div class="flex flex-wrap items-center gap-4">
                            <a href="/registro" 
                               onclick="trackEvent('click_trial')"
                               class="inline-flex items-center gap-2 bg-white text-blue-600 px-8 py-4 rounded-xl font-bold text-lg hover:bg-gray-100 transition shadow-xl">
                                Probar gratis 14 d√≠as
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                                </svg>
                            </a>
                            <button onclick="agendarDemo()" 
                                    class="inline-flex items-center gap-2 bg-white/10 backdrop-blur text-white border-2 border-white/30 px-6 py-4 rounded-xl font-semibold hover:bg-white/20 transition">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                Agendar demo
                            </button>
                        </div>
                    </div>
                    <div class="hidden lg:block">
                        <div class="bg-white/10 backdrop-blur rounded-2xl p-6 border border-white/20">
                            <p class="text-xs text-blue-100 font-semibold uppercase mb-2">Con Sales AI</p>
                            <div class="space-y-3">
                                <div class="flex items-center gap-3">
                                    <svg class="w-5 h-5 text-green-300" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span class="text-sm">Evaluaci√≥n autom√°tica con IA</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <svg class="w-5 h-5 text-green-300" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span class="text-sm">Scoring en 30 segundos</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <svg class="w-5 h-5 text-green-300" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span class="text-sm">Dashboard completo</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- An√°lisis detallado -->
        <div class="grid md:grid-cols-2 gap-6 mb-8">
            
            <!-- Cuello de botella -->
            <div class="bg-white rounded-xl p-6 border border-gray-200">
                <div class="flex items-center gap-2 mb-4">
                    <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                    </svg>
                    <h3 class="font-bold text-gray-900">Principal Cuello de Botella</h3>
                </div>
                <p class="text-gray-700 bg-red-50 p-4 rounded-lg border border-red-100">
                    {{ diagnostico.cuello_botella }}
                </p>
            </div>

            <!-- Comparaci√≥n vs benchmark -->
            <div class="bg-white rounded-xl p-6 border border-gray-200">
                <div class="flex items-center gap-2 mb-4">
                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    <h3 class="font-bold text-gray-900">Comparado con el Benchmark</h3>
                </div>
                <div class="space-y-3">
                    <div class="p-3 bg-yellow-50 rounded-lg border border-yellow-100">
                        <p class="text-sm font-medium text-gray-900">‚è±Ô∏è Tiempo:</p>
                        <p class="text-sm text-gray-700">{{ mensajes.tiempo }}</p>
                    </div>
                    <div class="p-3 bg-orange-50 rounded-lg border border-orange-100">
                        <p class="text-sm font-medium text-gray-900">üéØ Precisi√≥n:</p>
                        <p class="text-sm text-gray-700">{{ mensajes.error }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Proyecci√≥n con automatizaci√≥n -->
        <div class="bg-white rounded-xl p-8 border border-gray-200 mb-8">
            <h3 class="text-2xl font-bold text-gray-900 mb-6">Proyecci√≥n con Automatizaci√≥n IA</h3>
            
            <div class="grid md:grid-cols-3 gap-6">
                <div class="text-center p-6 bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl border border-blue-100">
                    <p class="text-sm text-gray-600 mb-2">Tiempo actual</p>
                    <p class="text-4xl font-bold text-gray-900 mb-1">{{ diagnostico.horas_mensuales|round|int }}h</p>
                    <div class="flex items-center justify-center gap-2 text-blue-600 font-semibold">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                        </svg>
                        {{ diagnostico.horas_optimizadas|round|int }}h
                    </div>
                    <p class="text-xs text-gray-500 mt-2">70% de reducci√≥n</p>
                </div>

                <div class="text-center p-6 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl border border-green-100">
                    <p class="text-sm text-gray-600 mb-2">Costo mensual</p>
                    <p class="text-4xl font-bold text-gray-900 mb-1">${{ "{:,.0f}".format(diagnostico.costo_operativo_mensual) }}</p>
                    <div class="flex items-center justify-center gap-2 text-green-600 font-semibold">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                        </svg>
                        ${{ "{:,.0f}".format(diagnostico.costo_optimizado_mensual) }}
                    </div>
                    <p class="text-xs text-gray-500 mt-2">Ahorro: ${{ "{:,.0f}".format(diagnostico.ahorro_mensual) }}/mes</p>
                </div>

                <div class="text-center p-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-100">
                    <p class="text-sm text-gray-600 mb-2">Capacidad</p>
                    <p class="text-4xl font-bold text-gray-900 mb-1">{{ diagnostico.total_cvs_mes }}</p>
                    <div class="flex items-center justify-center gap-2 text-purple-600 font-semibold">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                        </svg>
                        {{ diagnostico.capacidad_aumentada }}
                    </div>
                    <p class="text-xs text-gray-500 mt-2">233% m√°s candidatos</p>
                </div>
            </div>
        </div>

        <!-- Footer CTA -->
        <div class="text-center py-8">
            <p class="text-gray-600 mb-4">¬øListo para implementar estas mejoras?</p>
            <div class="flex flex-wrap items-center justify-center gap-4">
                <a href="/registro" 
                   onclick="trackEvent('click_trial_bottom')"
                   class="inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-xl font-bold text-lg transition shadow-lg">
                    Comenzar trial gratis
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                    </svg>
                </a>
                <button onclick="agendarDemo()" 
                        class="inline-flex items-center gap-2 bg-white border-2 border-gray-300 text-gray-700 px-6 py-4 rounded-xl font-semibold hover:border-gray-400 transition">
                    Hablar con un experto
                </button>
            </div>
        </div>

    </main>

    <script>
        const DIAGNOSTICO_ID = '{{ diagnostico.id }}';
        
        function trackEvent(event) {
            fetch('/calculadora/api/tracking', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    diagnostico_id: DIAGNOSTICO_ID,
                    accion: event
                })
            });
        }

        function descargarPDF() {
            trackEvent('click_descargar_pdf');
            alert('Generando PDF... (Feature en desarrollo)');
            // TODO: Implementar generaci√≥n de PDF
        }

        function agendarDemo() {
            trackEvent('click_agendar_demo');
            window.location.href = `/calculadora/demo?diagnostico_id=${DIAGNOSTICO_ID}`;
        }
    </script>
</body>
</html>